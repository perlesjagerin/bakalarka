%%%  Ukázkový text a dokumentace stylu pro text závěrečné (bakalářské a
%%%  diplomové) práce na KI PřF UP v Olomouci
%%%  Copyright (C) 2012 Martin Rotter, <rotter.martinos@gmail.com>
%%%  Copyright (C) 2014 Jan Outrata, <jan.outrata@upol.cz>


%%  Pro získání PDF souboru dokumentu je třeba tento zdrojový text v
%%  LaTeXu přeložit (dvakrát) programem pdfLaTeX.

%%  V případě použití programu BibLaTeX pro tvorbu seznamu literatury
%%  je poté ještě třeba spustit program Biber s parametrem jméno
%%  souboru zdrojového textu bez přípony a následně opět (dvakrát)
%%  přeložit zdrojový text programem pdfLaTeX.

%%  Postup získání Postscriptového souboru je popsán v dokumentaci.


%%  Třída dokumentu implementující styl pro závěrečnou práci. Vybrané
%%  nepovinné parametry (ostatní v dokumentaci):

%%  'master' pro sazbu diplomové práce, jinak se sází bakalářská práce

%%  'program=kód' pro Váš studijní program/obor (specializaci), kódy
%%  pro diplomovou práci 'infoi' pro Informatiku (Obecná informatika),
%%  'infui' pro Informatiku (Umělá inteligence), 'ainfpst' pro
%%  Aplikovanou informatiku (Počítačové systémy a technologie), 'uinf'
%%  pro Učitelství informatiky pro střední školy, 'binf' pro
%%  Bioinformatiku, 'inf' pro Informatiku (bez specializací) a 'ainf'
%%  pro Aplikovanou informatiku (bez specializací), jinak je výchozí
%%  ainfvs pro Aplikovanou informatiku (Vývoj software), a pro
%%  bakalářskou práci 'infoi' pro Informatiku (Obecná informatika),
%%  'itp' pro Informační technologie v prezenční formě, 'itk' pro
%%  Informační technologie v kombinované formě, 'infv' pro Informatiku
%%  pro vzdělávání, 'binf' pro Bioinfomatiku, 'inf' pro Informatiku
%%  (bez specializací), 'ainfp' pro Aplikovanou informatiku (bez
%%  specializací) v prezenční formě, 'ainfk' pro Aplikovanou
%%  informatiku (bez specializací) v kombinované formě, jinak je
%%  výchozí infpvs pro Informatiku (Programování a vývoj software)

%%  'printversion' pro sazbu verze pro tisk (nebarevné logo a odkazy,
%%  odkazy s uvedením adresy za odkazem, ne odkazy do rejstříku),
%%  jinak verze pro prohlížeč

%%  'biblatex' pro zapnutí podpory pro sazbu bibliografie pomocí
%%  BibLaTeXu, jinak je výchozí sazba v prostředí thebibliography

%%  'language=jazyk' pro jazyk práce, jazyky english pro anglický,
%%  slovak pro slovenský, jinak je výchozí czech pro český

%%  'font=sans' pro bezpatkový font (Iwona Light), jinak je výchozí
%%  serif pro patkový (Latin Modern)

%%  'figures, tables, theorems a sourcecodes' pro sazbu seznamu
%%  obrázků, tabulek, vět a zdrojových kódů, jinak při =false se
%%  nesází (u theorems a sourcecodes výchozí)

\documentclass[
program=itk,
%  printversion,
  biblatex,
%  language=english,
%  font=sans,
  figures=false,
%  tables=false,
%  theorems,
%  sourcecodes,
  glossaries,
  index
]{kidiplom}

%% Informace pro úvodní strany. V jazyku práce (pokud není v komentáři
%% uvedeno česky) a anglicky. Uveďte všechny, u kterých není v
%% komentáři uvedeno, že jsou volitelné. Při neuvedení se použijí
%% výchozí texty. Text pro jiný než nastavený jazyk práce (nepovinným
%% parametrem language makra \documentclass, výchozí český) se zadává
%% použitím makra s uvedením jazyka jako nepovinného parametru.

%% Název práce, česky a anglicky. Měl by se vysázet na jeden řádek.
\title{Interaktivní webová platforma pro rezervaci vstupenek na studentské akce}
\title[english]{Interactive web platform for ticket reservation on student events}

%% Volitelný podnázev práce, česky a anglicky. Měl by se vysázet na
%% jeden řádek. Výchozí je prázdný.
%% \subtitle{Ukázkový text a dokumentace stylu v \LaTeX{}u}
%% \subtitle[english]{Sample text and documentation of the \LaTeX{} style}

%% Jméno autora práce. Makro nemá nepovinný parametr pro uvedení
%% jazyka.
\author{Tuan Anh Nguyen}

%% Jméno vedoucího práce (včetně titulů). Makro nemá nepovinný
%% parametr pro uvedení jazyka.
\supervisor{Mgr. Jiří Zacpal, Ph.D.}

%% Volitelný rok odevzdání práce. Výchozí je aktuální (kalendářní)
%% rok. Makro nemá nepovinný parametr pro uvedení jazyka.
%\yearofsubmit{\the\year}

%% Anotace práce, včetně anglické (obvykle překlad z jazyka
%% práce). Jeden odstavec!
\annotation{Bakalářská práce se zabývá návrhem a implementací webové aplikace pro rezervaci vstupenek na studentské akce. Aplikace umožňuje organizátorům vytvářet a spravovat akce, uživatelům rezervovat a platit vstupenky online. Systém využívá moderní technologie jako React, Node.js, PostgreSQL a integruje platební bránu Stripe. Součástí je kompletní systém správy rezervací, reklamací, automatických emailových notifikací a generování PDF vstupenek s QR kódy. Práce zahrnuje i administrační rozhraní pro správu uživatelů a akcí.}

\annotation[english]{This bachelor thesis focuses on the design and implementation of a web application for ticket reservation for student events. The application allows organizers to create and manage events, and users to reserve and pay for tickets online. The system uses modern technologies such as React, Node.js, PostgreSQL and integrates the Stripe payment gateway. It includes a complete reservation management system, complaints handling, automatic email notifications and PDF ticket generation with QR codes. The work also includes an administrative interface for user and event management.}

%% Klíčová slova práce, včetně anglických. Oddělená (obvykle) středníkem.
\keywords{webová aplikace; rezervační systém; vstupenky; React; Node.js; TypeScript; Stripe; PostgreSQL; studentské akce}
\keywords[english]{web application; reservation system; tickets; React; Node.js; TypeScript; Stripe; PostgreSQL; student events}

%% Volitelná specifikace příloh textu práce, i anglicky. Výchozí je
%% 'elektronická data v systému katedry informatiky / electronic data
%% in system of department of computer science'.
%\supplements{nejlepší software všech dob}
%\supplements[english]{the best software of all times}

%% Volitelné poděkování. Stručné! Výchozí je prázdné. Makro nemá
%% nepovinný parametr pro uvedení jazyka.
\thanks{Děkuji, děkuji, děkuji.}

%% Cesta k souboru s bibliografií pro její sazbu pomocí BibLaTeXu
%% (zvolenou nepovinným parametrem biblatex makra
%% \documentclass). Použijte pouze při této sazbě, ne při (výchozí)
%% sazbě v prostředí thebibliography.
\bibliography{bibliografie.bib}

%% Další dodatečné styly (balíky) potřebné pro sazbu vlastního textu
%% práce.
\usepackage{lipsum}
\usepackage{longtable}

\begin{document}
%% Sazba úvodních stran -- titulní, s bibliografickými údaji, s
%% anotací a klíčovými slovy, s poděkováním a prohlášením, s obsahem a
%% se seznamy obrázků, tabulek, vět a zdrojových kódů (pokud jejich
%% sazba není vypnutá).
\maketitle

%% Vlastní text závěrečné práce. Pro povinné závěry, před přílohami,
%% použijte prostředí kiconclusions. Povinná je i příloha s obsahem
%% elektronických dat.

%% -------------------------------------------------------------------

\newcommand{\BibLaTeX}{\textsc{Bib}\LaTeX}

% \noindent\textcolor{red}{\LARGE Upozornění: Následující text
%   dokumentace stylu, vyjma přílohy~\ref{sec:ObsahData}, je rozpracovaná
%   a (značně) neúplná verze!!!}

\section{Průzkum existujících řešení}
Pro zkoumání budou vybrány následující platformy:
\begin{itemize}
    \item Eventbrite
    \item Ticketmaster
    \item Meetup
    \item Eventzilla
\end{itemize}

\subsection{Popis jednotlivých řešení}

\subsubsection{Eventbrite}
je platforma využívající technologie Ruby on Rails, React a PostgreSQL. Mezi hlavní funkce patří vytváření, modifikace a rušení akcí, rezervace a nákup vstupenek online, podpora různých typů vstupenek (volný vstup, placené vstupenky), integrovaný platební systém a možnost refundací. Výhodou Eventbrite je jeho vysoký výkon a škálovatelnost, stejně jako podpora různých platebních bran. Na druhou stranu se jedná o řešení s vyššími náklady na implementaci a údržbu a složitým kódem

\subsubsection{Ticketmaster}
je postaven na technologiích Java, Spring Boot, Angular a MySQL. Poskytuje funkce správy a propagace akcí, rezervace a prodeje vstupenek, podporu mobilních vstupenek a systém pro správu vstupenek, včetně reklamací a refundací. Ticketmaster je robustní a zabezpečená platforma, která podporuje velký počet uživatelů a transakcí. Nevýhodou jsou vyšší složitost vývoje a údržby a vysoké náklady na provoz.

\subsubsection{Meetup}
využívá technologie Node.js, Express.js, React a MongoDB. Umožňuje organizaci a správu událostí, potvrzení účasti (RSVP) a podporu plateb za akce. Mezi jeho výhody patří flexibilní a rychlý vývoj díky použitým technologiím a dobrá podpora komunitních funkcí. Omezení spočívají ve škálovatelnosti pro velmi velké akce a méně pokročilých funkcích pro správu plateb.

\subsubsection{Eventzilla}
je platforma postavená na PHP, Laravel, Vue.js a PostgreSQL. Nabízí funkce pro vytváření a správu událostí, rezervaci a prodej vstupenek, podporu různých typů vstupenek a integraci s různými platebními bránami. Výhodou Eventzilla je snadné přizpůsobení a rozšíření funkcí, stejně jako dobrá podpora různých platebních systémů. Nevýhodou je méně známá značka a omezené analytické nástroje.

\subsection{Hodnocení kladů a záporů}
Pokud se podíváme na hodnocení kladů a záporů jednotlivých řešení, Eventbrite je vysoce výkonné a škálovatelné, ale s vyššími náklady a komplexností. Ticketmaster je robustní a zabezpečené, ale drahé a složité. Meetup nabízí flexibilní a rychlý vývoj, ale je omezené pro velké akce. Eventzilla je přizpůsobitelné a cenově dostupné, ale méně známé a s omezenými analytickými nástroji.

\subsection{Vyhodnocení přínosů}
Co se týče přínosů, Eventbrite inspiruje k vytvoření výkonného a škálovatelného řešení. Ticketmaster ukazuje, jak vybudovat robustní a zabezpečenou platformu. Meetup klade důraz na komunitní funkce a rychlý vývoj. Eventzilla nabízí přístup k přizpůsobitelnému a cenově dostupnému řešení.

\subsection{Přínosy vlastní práce}
Podpora studentských aktivit bude posílena vytvořením platformy pro rezervaci vstupenek, což usnadní organizaci a propagaci studentských akcí. To přispěje k aktivnímu studentskému životu a komunitě. Zjednodušení správy akcí prostřednictvím automatizace a zjednodušení procesů spojených s organizací akcí ulehčí práci studentským organizátorům, kteří se tak mohou více soustředit na kreativní a obsahovou část akcí.

Zvýšení účasti na akcích je dalším přínosem, neboť snadná dostupnost a rezervace vstupenek může vést ke zvýšenému zapojení studentů do komunitního života. Bezpečnost a pohodlí budou zajištěny implementací moderních platebních systémů a ochranou osobních údajů podle GDPR, což zvýší důvěru uživatelů v používání platformy.

Rozvoj digitálních dovedností u studentů zapojených do vývoje a správy platformy je další významný přínos. Studenti získají praktické zkušenosti s moderními technologiemi a vývojem webových aplikací, což je cenné pro jejich budoucí profesní kariéru. Ekologický přínos se projeví digitalizací vstupenek a snížením potřeby fyzických vstupenek, což přispěje k ochraně životního prostředí.

Zahájení činnosti studentské organizace zaměřené na organizaci a propagaci studentských akcí může být dalším přínosem této práce. Tím se obohatí univerzitní komunita a nabídnou se nové příležitosti pro zapojení studentů.

\section{Specifikace řešení}

\subsection{Uživatelské role}
Platforma bude disponovat několika uživatelskými rolemi, z nichž každá bude mít specifické přístupy a oprávnění. 

\textbf{Administrátor} bude mít plný přístup ke všem funkcím systému, což mu umožní kontrolovat a spravovat všechny aspekty platformy. 

\textbf{Organizátor} bude mít přístup k vytváření a správě vlastních akcí, což zahrnuje možnosti přidávat nové události, upravovat stávající a rušit je podle potřeby. 

Běžný \textbf{uživatel} bude mít přístup k prohlížení nabízených akcí a rezervaci vstupenek, čímž se usnadní zapojení do studentských aktivit.

\subsection{Správa událostí}
V rámci správy událostí může organizátor přidávat nové akce vyplněním detailního formuláře, který obsahuje všechny potřebné specifikace události - název, popis, datum a čas (startDate, endDate), místo konání, kategorii, cenu vstupenky a celkový počet dostupných vstupenek.

Po zveřejnění má organizátor možnost upravovat údaje akce, měnit její stav (DRAFT, PUBLISHED, CANCELLED, COMPLETED) a sledovat statistiky - počet prodaných vstupenek, celkový příjem a zbývající kapacitu.

V případě potřeby zrušení události (stav CANCELLED) systém automaticky informuje všechny registrované účastníky emailovou notifikací a v případě placených akcí spustí proces refundace. Aktuálně dostupné vstupenky se automaticky aktualizují při každé nové rezervaci.

\subsection{Rezervace}
Uživatelé mohou prohlížet dostupné akce prostřednictvím přehledného seznamu s možností filtrování podle kategorií (Hudba, Divadlo, Film, Sport, Technologie, Vzdělávání, Jiné) a vyhledávání podle názvu akce. Každá akce zobrazuje základní informace včetně počtu zbývajících vstupenek a ceny.

Detail akce poskytuje kompletní informace o události včetně popisu, data a času, místa konání a statistik. Uživatel si zde může vybrat počet vstupenek (max. 10 na jednu rezervaci) a přejít k platbě.

Při placených akcích je implementován Stripe Payment Intent flow s bezpečným platebním formulářem (Stripe Elements). Po úspěšné platbě potvrzené přes Stripe webhook je rezervace automaticky označena jako PAID a uživatel obdrží emailové potvrzení s rezervačním kódem.

Pro akce zdarma (ticketPrice = 0) je rezervace okamžitě potvrzena bez platebního procesu. Uživatel může své rezervace spravovat na stránce "Moje rezervace", kde může rezervaci zrušit (refundace pro placené rezervace) nebo stáhnout PDF vstupenku s QR kódem.

\subsection{Reklamace a vrácení vstupenek}
Systém reklamací umožňuje uživatelům podat reklamaci na rezervovanou akci prostřednictvím formuláře, který vyžaduje popis problému. Reklamace prochází těmito stavy:
\begin{itemize}
    \item \textbf{SUBMITTED} - Nově podaná reklamace čekající na posouzení
    \item \textbf{IN\_REVIEW} - Reklamace je v procesu posuzování administrátorem
    \item \textbf{RESOLVED} - Reklamace byla schválena, proběhla refundace
    \item \textbf{REJECTED} - Reklamace byla zamítnuta
\end{itemize}

Admin může v administračním rozhraní (\texttt{/admin/complaints}) prohlížet všechny reklamace, filtrovat podle statusu a reagovat na ně. Při vyřízení reklamace admin vyplní odpověď a volitelně zaškrtne checkbox pro automatickou refundaci.

Pokud je reklamace schválena s refundací, systém automaticky:
\begin{enumerate}
    \item Provede Stripe refund (pouze pro placené akce)
    \item Aktualizuje stav rezervace na CANCELLED
    \item Zvýší počet dostupných vstupenek na akci
    \item Odešle emailovou notifikaci uživateli s informací o refundaci
\end{enumerate}

Pro akce zdarma se provede pouze zrušení rezervace bez Stripe refundu. Všechny operace jsou atomické a zajištěné databázovou transakcí.

\subsection{Návrh vhodných technologií}

\subsubsection{Backend}
Pro backend je použit \textbf{Node.js} s \textbf{TypeScript}, který se vyznačuje rychlým a efektivním asynchronním zpracováním. Tato vlastnost je klíčová pro aplikace, které musí zvládat vysokou zátěž na I/O operace, jako jsou rezervace a platby.

V kombinaci s Node.js je použit \textbf{Express.js}, což je jednoduchý a minimalistický framework pro RESTful API. Pro práci s databází slouží \textbf{Prisma ORM}, který poskytuje type-safe přístup k datům a automatickou generaci TypeScript typů.

Implementovány jsou i další knihovny: \textbf{Nodemailer} pro odesílání emailových notifikací, \textbf{PDFKit} pro generování PDF vstupenek, \textbf{QRCode} pro vytváření QR kódů na vstupenky a \textbf{bcryptjs} pro bezpečné hashování hesel.

\subsubsection{Databáze}
Pro ukládání dat je použita \textbf{PostgreSQL}, což je spolehlivá a výkonná relační databáze. Podporuje pokročilé funkce jako je transakční zpracování, což je klíčové pro zajištění integrity dat při rezervacích a platbách.

Pro práci s databází slouží \textbf{Prisma ORM}, které poskytuje:
\begin{itemize}
    \item Type-safe přístup k datům s automatickým generováním TypeScript typů
    \item Deklarativní databázové schéma
    \item Automatické migrace databáze
    \item Prisma Studio pro vizuální správu dat
\end{itemize}

Databáze obsahuje 7 hlavních modelů: User, Event, Reservation, Payment, Complaint, Ticket a RefreshToken.

\subsubsection{Frontend}
Na frontendu je použit \textbf{React 18} s \textbf{TypeScript}, což je vysoce výkonný a flexibilní frontendový framework. React umožňuje vytváření dynamických uživatelských rozhraní a díky komponentovému přístupu usnadňuje správu a opakované použití kódu.

Jako build tool slouží \textbf{Vite}, který zajišťuje rychlý development server a optimalizovaný production build. Pro routing je použit \textbf{React Router v6} s lazy loading pro optimalizaci výkonu.

Stav aplikace je řízen pomocí \textbf{Zustand} (lightweight state management) a \textbf{Axios} pro HTTP komunikaci s backendem. Formuláře využívají \textbf{React Hook Form} s \textbf{Zod} validací pro type-safe validaci dat.

Pro stylování je využit \textbf{Tailwind CSS}, což je utility-first CSS framework umožňující rychlé a efektivní stylování s plnou responzivitou. Pro ikony slouží \textbf{Lucide React} a pro notifikace \textbf{React Hot Toast}.

\subsubsection{Autentizace a autorizace}
Pro autentizaci a autorizaci uživatelů je implementován systém založený na \textbf{JWT} (JSON Web Tokens). Systém využívá dva typy tokenů:
\begin{itemize}
    \item \textbf{Access Token} - krátkodobý (15 minut), používaný pro autentizaci API požadavků
    \item \textbf{Refresh Token} - dlouhodobý (7 dní), uložený v databázi, sloužící k obnovení access tokenu
\end{itemize}

Hesla jsou bezpečně hashována pomocí \textbf{bcryptjs} s salt rounds nastaveným na 10. Middleware \texttt{authenticate} chrání všechny chráněné API endpointy a automaticky ověřuje JWT tokeny.

\subsubsection{Platby}
Pro zpracování plateb je implementována integrace se \textbf{Stripe}, což je flexibilní a spolehlivá platební brána. Implementace zahrnuje:
\begin{itemize}
    \item \textbf{Stripe Elements} - bezpečný platební formulář na frontendu
    \item \textbf{Payment Intent API} - vytváření platebních intentů na backendu
    \item \textbf{Webhook} - automatické potvrzování plateb přes Stripe webhook endpoint
    \item \textbf{Refundace} - automatické vrácení peněz při schválení reklamace
\end{itemize}

Stripe zajišťuje PCI DSS compliance a podporuje různé platební metody. Pro akce zdarma (ticketPrice = 0) se platební proces přeskakuje a rezervace je okamžitě potvrzena.

\subsubsection{Hosting a nasazení}
Aplikace je připravena pro nasazení na různé platformy. Pro development a lokální testování je připraven \textbf{Docker Compose} setup, který automaticky spustí frontend, backend, PostgreSQL databázi a Stripe CLI pro testování webhooků.

Pro production deployment je aplikace připravena pro platformy jako:
\begin{itemize}
    \item \textbf{Heroku} - jednoduchá PaaS platforma s automatickým deploymentem
    \item \textbf{Railway} - moderní alternativa k Heroku
    \item \textbf{AWS/Azure} - pro enterprise deployment s vlastní konfigurací
    \item \textbf{Vercel} (frontend) + \textbf{Render} (backend) - serverless architektura
\end{itemize}

V dokumentaci je připraven kompletní production checklist včetně nastavení environment proměnných, SSL certifikátů a databázových migrací.

\subsection{Implementované pokročilé funkce}

\subsubsection{Email notifikace}
Systém automaticky odesílá emailové notifikace při klíčových událostech:
\begin{itemize}
    \item \textbf{Welcome email} - při registraci nového uživatele
    \item \textbf{Reservation confirmation} - po úspěšné rezervaci s detaily akce
    \item \textbf{Payment confirmation} - po potvrzení platby přes Stripe webhook
    \item \textbf{Reservation cancellation} - při zrušení rezervace s informací o refundaci
    \item \textbf{Event status change} - při změně stavu akce (pro organizátora)
    \item \textbf{Complaint response} - při vyřízení reklamace
\end{itemize}

Všechny emaily mají profesionální HTML design s gradientním headerem, jsou responzivní a obsahují call-to-action buttony s odkazy do aplikace. Pro odesílání je použita knihovna Nodemailer s SMTP konfigurací (podporuje Gmail, Outlook, vlastní SMTP server).

\subsubsection{PDF vstupenky s QR kódy}
Každá potvrzená rezervace (status PAID) umožňuje stažení PDF vstupenky, která obsahuje:
\begin{itemize}
    \item Název a logo aplikace
    \item Detaily akce (název, datum, místo)
    \item Informace o uživateli (jméno, email)
    \item Počet vstupenek a celková cena
    \item QR kód s rezervačním kódem pro ověření při vstupu
    \item Rezervační kód v textové podobě
\end{itemize}

PDF je generováno na backendu pomocí knihovny PDFKit s podporou Unicode znaků (Arial TTF font) a QR kód je vytvořen knihovnou qrcode. Vstupenka je automaticky stažena jako \texttt{vstupenka-\{reservationCode\}.pdf}.

\subsubsection{Admin dashboard}
Administrátoři mají přístup ke komplexnímu dashboardu s těmito funkcemi:
\begin{itemize}
    \item \textbf{Správa uživatelů} - zobrazení všech uživatelů, filtrování podle role (ADMIN, ORGANIZER, USER), aktivace/deaktivace účtů, ochrana admin účtů před deaktivací, statistiky počtu uživatelů podle rolí
    \item \textbf{Správa všech akcí} - přehled akcí od všech organizátorů, možnost úpravy nebo smazání jakékoliv akce
    \item \textbf{Správa reklamací} - centralizovaný přehled všech reklamací s možností filtrování, schvalování/zamítání, automatická refundace
\end{itemize}

\subsubsection{Testování}
Projekt obsahuje komplexní testovací pokrytí:
\begin{itemize}
    \item \textbf{Frontend testy} - rozsáhlá sada unit testů (Vitest, React Testing Library) pokrývající komponenty, utility funkce a konstanty
    \item \textbf{Backend testy} - integration testy (Jest, Supertest) testující všechny API endpointy s testovací PostgreSQL databází
    \item \textbf{E2E testy} - Playwright testy pokrývající kompletní user flows (registrace, rezervace, platba)
    \item \textbf{Performance testy} - Node.js skripty pro zátěžové testování API endpointů
    \item \textbf{Security testy} - Testy pro SQL injection, XSS, CSRF, rate limiting
\end{itemize}

Celkové testovací pokrytí dosahuje vysokých hodnot na straně backendu i frontendu.

\subsection{Relační model databáze}
\begin{figure}[h!]
    \centering
    \includegraphics[width=0.9\textwidth]{graphics/Database model.png}
    \caption{Relační model databáze - 5 tabulek s vazbami}
    \label{fig:dbmodel}
\end{figure}

Databázový model obsahuje 5 hlavních entit (User, Event, Reservation, Payment, Complaint) a 5 enumeračních typů pro stavy. Všechny tabulky využívají UUID primární klíče a obsahují časové razítko pro sledování vytvoření a aktualizace záznamů. Vztahy mezi tabulkami zajišťují referenční integritu a podporují kaskádové operace.

\subsection{Diagram tříd}
\begin{figure}[h!]
    \centering
    \includegraphics[width=0.95\textwidth]{graphics/Class diagram.png}
    \caption{Diagram tříd - Backend struktura (MVC pattern)}
    \label{fig:classdiagram}
\end{figure}

Architektura backendu je rozdělena do čtyř hlavních vrstev: Controllers (zpracování HTTP požadavků), Services (business logika), Middleware (autentizace, validace, error handling) a Database (Prisma ORM). Všechny služby sdílejí přístup k Prisma klientovi pro práci s databází. EmailService a TicketGenerator jsou pomocné třídy volané z různých služeb pro odesílání notifikací a generování PDF vstupenek.

\subsection{Dokumentace}

Pro účely splnění požadavků na zápočet byly vytvořeny dva klíčové dokumenty:

\subsubsection{Programátorská příručka}
Programátorská příručka (viz \texttt{docs/prirucka-programatorska.md}) obsahuje kompletní technickou dokumentaci pro vývojáře. Příručka popisuje architekturu aplikace s použitím MVC patternu, všechny datové struktury včetně databázových modelů, klíčové algoritmy jako JWT autentizaci, atomické transakce, Stripe webhook handling, proces refundace a generování PDF vstupenek s QR kódy.

Dále jsou zde uvedeny možnosti rozšíření aplikace - přidání nových entit, notifikací, platebních metod a uživatelských rolí. Součástí je i dokumentace k testování (unit, integration a E2E testy) a k deployment procesu včetně Docker Compose setupu a cloud deployment možností (Heroku, Railway, AWS, Vercel + Render).

\subsubsection{Uživatelská příručka}
Uživatelská příručka (viz \texttt{docs/prirucka-uzivatelska.md}) poskytuje kompletní návod pro koncové uživatele všech rolí v systému. Příručka je rozdělena do kapitol pokrývajících registraci a přihlášení, prohlížení a vyhledávání akcí s filtrováním podle kategorií, proces rezervace vstupenek včetně platby kartou přes Stripe a zpracování akcí zdarma.

Dále popisuje správu rezervací se stahováním PDF vstupenek s QR kódy, systém reklamací s automatickou refundací, funkce pro organizátory (vytváření, úprava a správa akcí, statistiky, zobrazení rezervací) a funkce pro administrátory (dashboard, správa uživatelů, správa všech akcí, vyřizování reklamací).

Součástí je i sekce FAQ s odpověďmi na nejčastější dotazy a tipy pro efektivní využití platformy podle jednotlivých uživatelských rolí.

\subsection{Diagram případu použití}
\begin{figure}[h!]
    \centering
    \includegraphics[width=0.85\textwidth]{graphics/Use case diagram - Rezervacni system.png}
    \caption{Diagram případu použití - Rezervační systém}
    \label{fig:usecase}
\end{figure}


\end{document}
